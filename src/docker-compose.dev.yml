version: '3.8'

services:
  stagepi-dev:
    image: stagepi-dev:${STAGEPI_VERSION:-latest}
    build:
      context: .
      dockerfile: Dockerfile.dev
      # Use BuildKit for better caching
      cache_from:
        - stagepi-dev:latest
    ports:
      - "8000:8000"
    environment:
      - PYTHONUNBUFFERED=1
    # Override entrypoint for interactive development
    # Uncomment to get a bash shell instead of supervisor
    # entrypoint: /bin/bash
    # stdin_open: true
    # tty: true
